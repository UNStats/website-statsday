<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Official website for World Statistics Day 2015">
  <meta name="author" content="United Nations Statistics Division">

  <title>World Statistics Day 2015</title>

  <!-- Bootstrap Core CSS -->
  <link href="css/bootstrap.min.css" rel="stylesheet">

  <!-- Custom CSS -->
  <link href="css/wsd.css" rel="stylesheet">

  <!-- Custom Fonts -->
  <link href="font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
  <link href="http://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic,700italic" rel="stylesheet" type="text/css">

  <link rel="shortcut icon" type="image/ico" href="img/favicon.ico">

  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body>
  <!-- Navigation -->
  <nav class="navbar navbar-default topnav navbar-fixed-top" role="navigation">
    <!-- UN official web site banner -->
    <div class="UN-links">
      <div class="container">
        <a href="http://www.un.org/en/">United Nations</a> |
        <a href="http://www.un.org/desa/">Department of Economic and Social Affairs</a>
        <span class="hide-divider">|</span>
        <br />
        <a href="http://unstats.un.org/">Statistics Division</a>
      </div>
    </div>

    <div class="container topnav">
      <!-- Brand and toggle get grouped for better mobile display -->
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand topnav" href="index.html">
          <img src="img/wsd-logo-sm.png" class="" alt="World Statistics Day Logo" /> World Statistics Day 2015</a>
      </div>
      <!-- Collect the nav links, forms, and other content for toggling -->
      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
        <ul class="nav navbar-nav navbar-right">
          <li>
            <a href="index.html">Home</a>
          </li>
          <li>
            <a href="blog.html" class="active-tab">Blog</a>
          </li>
          <li>
            <a href="resources.html">Resources</a>
          </li>
          <!--  <li>
              <a href="photo-gallery.html">Gallery</a>
            </li> -->
        </ul>
      </div>
      <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
  </nav>

  <!-- Header -->
  <a name="about"></a>
  <div class="intro-header">
    <div class="container">
      <div class="row">
        <div class="col-md-1 col-md-offset-5">
          <img src="img/wsd-logo-white.png" class="img-responsive" alt="World Statistics Day Logo" />
        </div>
        <div class="col-md-1">
          <h2>Blog</h2>
        </div>
      </div>
    </div>
    <!-- /.container -->
  </div>
  <!-- /.intro-header -->

  <div class="mobile-top-margin"></div>

  <!-- .content-section-a -->
  <div class="content-section-a">
    <!-- .container -->
    <div class="container">
      <div class="filter-dropdown-m">
        <select class="btn btn-default" id="countries"></select><br />
        <select class="btn btn-default" id="organisations"></select><br />
        <a class="btn btn-default btn-filter" role="button" href="blog.html?ot=other">Non-Governmental Organisations</a>
      </div>
      <div class="all-posts">
        <div id="remove-filter" class="make-visible">
          <div id="selected-filter">
            <h4></h4></div>
          <a href="blog.html">See all posts <i class="fa fa-times-circle"></i></a>
        </div>
      </div>
      <div class="row">
        <div class="col-md-9">
          <ul id="posts" class="list">
          </ul>
        </div>
        <div class="col-md-3 no-filters-m">
          <h3 class="section-heading text-center">Activities</h3>
          <div class="active-countries country-scrolling">
            <h5 class="text-center">Countries/areas</h5>
            <ul id="countries-d" class="country-list">
            </ul>
          </div>
          <div class="active-countries organisation-scrolling">
            <h5 class="text-center">International Organisations</h5>
            <ul id="organisations-d">
            </ul>
          </div>
          <div class="active-countries">
            <a href="blog.html?ot=other"><h5 class="text-center">Non-Governmental Organisations</h5></a>
          </div>
        </div>
      </div>
      <!-- /.container -->
    </div>
  </div>
  <!-- /.content-section-a -->



  <a name="contact"></a>
  <div class="banner">
    <div class="container">
      <div class="row">
        <div class="col-lg-5 col-lg-offset-2">
          <p>This is a website by UNStats, the United Nations Statistics Division,
            <br>a Division of the Department of Economic and Social Affairs.</p>
        </div>
        <div class="col-lg-4">
          <ul class="list-inline banner-social-buttons">
            <li>
              <a href="https://twitter.com/UNStats" class="btn btn-default btn-sm"><i class="fa fa-twitter fa-2x fa-fw"></i></a>
            </li>
            <li>
              <a href="http://www.youtube.com/user/UNStats" class="btn btn-default btn-sm"><i class="fa fa-youtube fa-2x fa-fw"></i></a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <!-- /.container -->
  </div>
  <!-- /.banner -->

  <div id="placeholder"></div>


  <!-- Footer -->
  <footer>
    <div class="container">
      <div class="row">
        <div class="col-lg-12">
          <ul class="list-inline">
            <li>
              <a href="http://unstats.un.org/unsd/wsd/" target="_blank">World Statistics Day 2010</a>
            </li>
            <li class="footer-menu-divider">&sdot;</li>
            <li>
              <a href="http://www.un.org/en/aboutun/copyright/" target="_blank">Copyright</a>
            </li>
            <li class="footer-menu-divider">&sdot;</li>
            <li>
              <a href="http://www.un.org/en/aboutun/terms/" target="_blank">Terms of Use</a>
            </li>
            <li class="footer-menu-divider">&sdot;</li>
            <li>
              <a href="http://www.un.org/en/aboutun/privacy/" target="_blank">Privacy Notice</a>
            </li>
            <li class="footer-menu-divider">&sdot;</li>
            <li>
              <a href="http://www.un.org/en/aboutun/fraudalert/" target="_blank">Fraud Alert</a>
            </li>
          </ul>
          <p class="copyright text-muted small">&copy; 2015 by United Nations</p>
        </div>
      </div>
    </div>
  </footer>

  <!-- jQuery -->
  <script src="js/mustache.js"></script>
  <script src="js/jquery.js"></script>

  <!-- Bootstrap Core JavaScript -->
  <script src="js/bootstrap.min.js"></script>

  <!-- Markdown library -->
  <script src="js/markdown.js"></script>

  <!-- lodash library -->
  <script src="js/lodash.min.js"></script>

  <!-- WSD specific JS
  <script src="js/wsd2015.js"></script>-->

  <script id="countries-template" type="text/template">
    <option value="Select a country">Select a country</option>
    {{#codes}} {{#country}}
    <option value="{{code}}">{{name}}</option>
    {{/country}} {{/codes}}
  </script>

  <script id="organisations-template" type="text/template">
    <option value="Select an organisation">Select an organisation</option>
    {{#codes}} {{#organisation}} {{#isInternational}}
    <option value="{{code}}">{{name}}</option>
    {{/isInternational}} {{/organisation}} {{/codes}}
  </script>

  <script id="countries-d-template" type="text/template">
    {{#codes}} {{#country}}
    <li>
      <a href="blog.html?c={{code}}"><img src="img/flags_15/flag_button_{{code}}.jpg" alt="{{name}} flag" /> {{name}}</a>
    </li>
    {{/country}} {{/codes}}
  </script>

  <script id="organisations-d-template" type="text/template">
    {{#codes}} {{#organisation}} {{#isInternational}}
    <li>
      <a href="blog.html?o={{code}}">{{name}}</a>
    </li>
    {{/isInternational}} {{/organisation}} {{/codes}}
  </script>

  <script>
    $(function() {
            $.getJSON('js/posts.json', function(data) {
                /* Desktop version */
                var template = $('#countries-d-template').html();
                var items = Mustache.to_html(template, data);
                $('#countries-d').html(items);

                template = $('#organisations-d-template').html();
                _(data.codes.organisation).map(function(o) { o.isInternational = o.type === 'international'; return o; }).value();
                items = Mustache.to_html(template, data);
                $('#organisations-d').html(items);

                /* Mobile version */
                template = $('#countries-template').html();
                items = Mustache.to_html(template, data);
                $('#countries').html(items);

                template = $('#organisations-template').html();
                _(data.codes.organisation).map(function(o) { o.isInternational = o.type === 'international'; return o; }).value();
                items = Mustache.to_html(template, data);
                $('#organisations').html(items);
            });
        });
  </script>

  <script id="posts-template" type="text/template">
    {{#.}}
    <li class="post">
      <h3 class="post-heading">{{title}}</h3>
      <div class="row">
        <div class="col-lg-3">
          <div class="thumbnail">
            <img src="img/posts/{{image}}.jpg" class="img-responsive" />
          </div>
        </div>
        <div class="col-lg-9 post-body">
          <p class="date">{{date}}</p>
          <p>{{{html}}}</p>
          <p>
            <small>
              <em>Tags:
                <span class="country">{{{provider}}}</span>
              </em>
            </small>
          </p>
        </div>
      </div>
    </li>
    {{/.}}
  </script>

  <script>
    function getParameterByName(name) {
        name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
        var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
          results = regex.exec(location.search);
        return results === null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
      }

      $(function() {
        $.getJSON('js/posts.json', function(data) {
          var template = $('#posts-template').html();

          var countries = data.codes.country;

          if (countries) {
            countries.lookup = function (code) {
              return _(this).where({ 'code': code }).pluck('name').first();
            };
          }

          var organisations = data.codes.organisation;

          if (organisations) {
            organisations.lookup = function (code) {
              return _(this).where({ 'code': code }).pluck('name').first();
            };

            organisations.lookupByType = function (type) {
              return _(this).where({ 'type': type }).pluck('code').value();
            }
          }

          var addProvider = function(post) {
            post.provider = function() {
              var cs = _(this.countries || []).map(function (code) { return countries.lookup(code); });
              var os = _(this.organisations || []).map(function (code) { return organisations.lookup(code); }).value();
              return cs.concat(os).reduce(function (s, value) { return s += ', ' + value; });
            };
            return post;
          }

          var addHtml = function(post) {
            post.html = function() {
              return markdown.toHTML(this.text);
            };
            return post;
          };

          var o = getParameterByName('o');
          var ot = getParameterByName('ot');
          var c = getParameterByName('c');
          var i = getParameterByName('i');
          var posts = _(data.posts).map(addHtml).map(addProvider);

          if (o !== '') {
            posts = posts.where({'organisations': [o]});
            $("#remove-filter").removeClass("make-visible");
            $('#organisations').val(o);
            $("#selected-filter h4").text(organisations.lookup(o));
          }

          if (ot !== '') {
            var os = organisations.lookupByType(ot);
            posts = posts.filter(function(p) { return _.some(_.intersection(p.organisations, os)); });
            $("#remove-filter").removeClass("make-visible");
            $("#selected-filter h4").text("Non-governmental organisations");
          }

          if (c !== '') {
            posts = posts.where({'countries': [c]});
            $("#remove-filter").removeClass("make-visible");
            $('#countries').val(c);
            $("#selected-filter h4").text(countries.lookup(c));
          }

          if (i !== '') {
            posts = posts.where({'id': i});
            $("#remove-filter").removeClass("make-visible");
          }

          var postsHtml = Mustache.to_html(template, posts.value());
          $('#posts').html(postsHtml);
        });
      });
  </script>

  <script>
    $(function(){
        $("#countries").change(function(){
          window.location='blog.html?c=' + this.value;
        });
      });

      $(function(){
        $("#organisations").change(function(){
          window.location='blog.html?o=' + this.value;
        });
      });
  </script>

  <!--GA code -->
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-48267274-5', 'auto');
        ga('send', 'pageview');
  </script>

</body>

</html>
